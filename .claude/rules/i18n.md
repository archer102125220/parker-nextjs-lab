
# Internationalization (next-intl 4.x)

## Required Pattern for Server Components

When using translations in Server Components, ALWAYS follow this pattern:

```tsx
import { getTranslations, setRequestLocale } from 'next-intl/server';

type Props = {
  params: Promise<{ locale: string }>;
};

async function MyPage({ params }: Props) {
  const { locale } = await params;
  
  // MANDATORY: Call before any translation functions
  setRequestLocale(locale);
  
  const t = await getTranslations('pages.myPage');
  return <h1>{t('title')}</h1>;
}
```

## Key Rules

- **`setRequestLocale` first**: Must be called BEFORE `getTranslations` or `getMessages`
- **Page must have `params`**: Every page needs `params: Promise<{ locale: string }>`
- **Layout also needs it**: `app/[locale]/layout.tsx` must also call `setRequestLocale`

## Consequences of Missing `setRequestLocale`

- ❌ Server Components will default to fallback language (zh-tw)
- ❌ Language switching from URL will not work for page content
- ✅ Client Components (Header) will still work correctly

## Language Files

```
i18n/locales/zh-tw.json  # Traditional Chinese (default)
i18n/locales/en.json     # English
```
